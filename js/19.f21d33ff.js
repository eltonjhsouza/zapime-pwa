(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0bbc":function(a,t,o){"use strict";o.r(t);var e=function(){var a=this,t=a._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col"},[t("q-table",{staticClass:"my-sticky-dynamic q-ma-lg",attrs:{square:"",flat:"",bordered:"",title:"Fluxos","hide-bottom":"",data:a.listachatFlow,columns:a.columns,loading:a.loading,"row-key":"id",pagination:a.pagination,"rows-per-page-options":[0]},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"top-right",fn:function(){return[t("q-btn",{staticClass:"q-ml-md",attrs:{color:"primary",label:"Adicionar"},on:{click:function(t){a.chatFlowSelecionado={},a.modalChatFlow=!0}}})]},proxy:!0},{key:"body-cell-isActive",fn:function(o){return[t("q-td",{staticClass:"text-center"},[t("q-icon",{attrs:{size:"16px",name:o.value?"mdi-check-circle-outline":"mdi-close-circle-outline",color:o.value?"positive":"negative"}}),t("span",{staticClass:"q-mx-xs text-bold"},[a._v(" "+a._s(o.value?"Ativo":"Inativo")+" ")])],1)]}},{key:"body-cell-acoes",fn:function(o){return[t("q-td",{staticClass:"text-center"},[t("q-btn",{staticClass:"bg-padrao",attrs:{color:"blue-3",icon:"edit",flat:"",round:""},on:{click:function(t){return a.editFlow(o.row)}}},[t("q-tooltip",[a._v("\n                Editar informações\n              ")])],1),t("q-btn",{staticClass:"bg-padrao q-mx-sm",attrs:{color:"blue-3",icon:"mdi-content-duplicate",flat:"",round:""},on:{click:function(t){return a.duplicarFluxo(o.row)}}},[t("q-tooltip",[a._v("\n                Duplicar Fluxo\n              ")])],1),t("q-btn",{staticClass:"bg-padrao",attrs:{color:"blue-3",icon:"mdi-sitemap",flat:"",round:""},on:{click:function(t){return a.abrirFluxo(o.row)}}},[t("q-tooltip",[a._v("\n                Abrir Fluxo\n              ")])],1)],1)]}}])})],1)]),t("ModalChatFlow",{attrs:{modalChatFlow:a.modalChatFlow,chatFlowEdicao:a.chatFlowSelecionado},on:{"update:modalChatFlow":function(t){a.modalChatFlow=t},"update:modal-chat-flow":function(t){a.modalChatFlow=t},"update:chatFlowEdicao":function(t){a.chatFlowSelecionado=t},"update:chat-flow-edicao":function(t){a.chatFlowSelecionado=t},"chatFlow:criada":a.novoFluxoCriado,"chatFlow:editado":a.fluxoEditado}})],1)},l=[],i=(o("14d9"),o("ee0e")),s=o("824a"),c=o("9a1b"),n=function(){var a=this,t=a._self._c;return t("q-dialog",{attrs:{value:a.modalChatFlow,persistent:""},on:{hide:a.fecharModal,show:a.abrirModal}},[t("q-card",{staticClass:"q-pa-lg",staticStyle:{width:"500px"}},[t("q-card-section",[t("div",{staticClass:"text-h6"},[a._v(a._s(a.chatFlow.isDuplicate?"Duplicar":a.chatFlowEdicao.id?"Editar":"Criar")+" Fluxo "),a.chatFlow.isDuplicate?t("span",[a._v(" (Nome: "+a._s(a.chatFlowEdicao.name)+") ")]):a._e()]),a.chatFlow.isDuplicate?t("div",{staticClass:"text-subtitle1"},[a._v(" Nome: "+a._s(a.chatFlowEdicao.name)+" ")]):a._e()]),t("q-card-section",[t("q-input",{staticClass:"row col",attrs:{square:"",outlined:"",label:"Descrição"},model:{value:a.chatFlow.name,callback:function(t){a.$set(a.chatFlow,"name",t)},expression:"chatFlow.name"}}),t("div",{staticClass:"row col q-mt-md"},[t("q-checkbox",{attrs:{label:"Ativo"},model:{value:a.chatFlow.isActive,callback:function(t){a.$set(a.chatFlow,"isActive",t)},expression:"chatFlow.isActive"}})],1),t("div",{staticClass:"row col q-mt-md"},[t("q-input",{staticClass:"full-width",attrs:{clearable:"",square:"",outlined:"",label:"Número para Teste",hint:"Deixe limpo para que a Auto resposta funcione. Caso contrário, irá funcionar somente para o número informado aqui."},model:{value:a.chatFlow.celularTeste,callback:function(t){a.$set(a.chatFlow,"celularTeste",t)},expression:"chatFlow.celularTeste"}})],1)],1),t("q-card-actions",{staticClass:"q-mt-md",attrs:{align:"right"}},[t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-mr-md",attrs:{flat:"",label:"Cancelar",color:"negative"}}),t("q-btn",{attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:a.handleAutoresposta}})],1)],1)],1)},r=[];const d={name:"Fluxo Inicial",nodeList:[{id:"start",name:"Início",type:"start",left:"26px",top:"100px",ico:"mdi-play",viewOnly:!0,status:"success",style:{}},{id:"configurations",name:"Configurações",type:"configurations",left:"340px",top:"100px",viewOnly:!0,ico:"mdi-alert-circle-outline",configurations:{notOptionsSelectMessage:{message:"",stepReturn:"A"},notResponseMessage:{time:10,type:1,destiny:""},welcomeMessage:{message:""},maxRetryBotMessage:{number:3,type:1,destiny:""}}},{id:"nodeC",name:"Boas vindas!",type:"node",left:"26px",top:"301px",interactions:[],conditions:[],actions:[]}],lineList:[{from:"start",to:"nodeC",paintStyle:{strokeWidth:3,stroke:"#8db1dd"}}]};function u(){return d}const h=+localStorage.getItem("userId");var p={name:"ModalNovoChatFlow",props:{modalChatFlow:{type:Boolean,default:!1},chatFlowEdicao:{type:Object,default:()=>({id:null})}},data(){return{chatFlow:{name:null,userId:h,celularTeste:null,isActive:!0}}},methods:{abrirModal(){this.chatFlowEdicao.id?this.chatFlow={...this.chatFlowEdicao,userId:h}:this.chatFlow={name:null,action:0,userId:h,celularTeste:null,isActive:!0}},fecharModal(){this.chatFlow={name:null,action:0,userId:h,celularTeste:null,isActive:!0},this.$emit("update:chatFlowEdicao",{id:null}),this.$emit("update:modalChatFlow",!1)},async handleAutoresposta(){var a;if(!this.chatFlow.id||null!==(a=this.chatFlow)&&void 0!==a&&a.isDuplicate){const a={...u(),...this.chatFlow,id:null},{data:t}=await Object(s["a"])(a);this.$notificarSucesso("Novo fluxo criado."),this.$emit("chatFlow:criada",t)}else{const{data:a}=await Object(s["c"])(this.chatFlow);this.$notificarSucesso("Fluxo editado."),this.$emit("chatFlow:editado",a)}this.fecharModal()}}},w=p,m=o("2877"),F=o("24e8"),f=o("f09f"),b=o("a370"),v=o("27f9"),C=o("9f0a"),x=o("8f8e"),g=o("4b7e"),q=o("9c40"),y=o("7f67"),A=o("eebe"),k=o.n(A),_=Object(m["a"])(w,n,r,!1,null,"48e3ace7",null),S=_.exports;k()(_,"components",{QDialog:F["a"],QCard:f["a"],QCardSection:b["a"],QInput:v["a"],QOptionGroup:C["a"],QCheckbox:x["a"],QCardActions:g["a"],QBtn:q["a"]}),k()(_,"directives",{ClosePopup:y["a"]});var T={name:"ChatFlowIndex",components:{ModalChatFlow:S},data(){return{listachatFlow:[],modalChatFlow:!1,chatFlowSelecionado:{},pagination:{rowsPerPage:40,rowsNumber:0,lastIndex:0},params:{pageNumber:1,searchParam:null,hasMore:!0},loading:!1,columns:[{name:"name",label:"Nome",field:"name",align:"left"},{name:"isActive",label:"Status",field:"isActive",align:"center"},{name:"celularTeste",label:"Celular Teste",field:"celularTeste",align:"center"},{name:"acoes",label:"",field:"acoes",align:"center"}],filas:[],usuarios:[]}},methods:{async listarChatFlow(){const{data:a}=await Object(s["b"])();this.listachatFlow=a.chatFlow},async listarFilas(){const{data:a}=await Object(i["d"])({isActive:!0});this.filas=a.filter((a=>a.isActive))},async listarUsuarios(){const{data:a}=await Object(c["c"])(this.params);this.usuarios=a.users},novoFluxoCriado(a){const t=[...this.listachatFlow];t.push(a),this.listachatFlow=t},duplicarFluxo(a){this.chatFlowSelecionado={...a,isDuplicate:!0},this.modalChatFlow=!0},fluxoEditado(a){const t=[...this.listachatFlow.filter((t=>t.id!==a.id))];t.push(a),this.listachatFlow=t},editFlow(a){this.chatFlowSelecionado=a,this.modalChatFlow=!0},async abrirFluxo(a){await this.$store.commit("SET_FLOW_DATA",{usuarios:this.usuarios,filas:this.filas,flow:a}),this.$router.push({name:"chat-flow-builder"})}},async mounted(){await this.listarChatFlow(),await this.listarFilas(),await this.listarUsuarios()}},E=T,I=o("eaac"),M=o("db86"),O=o("0016"),Q=o("05c0"),D=Object(m["a"])(E,e,l,!1,null,"0bc48745",null);t["default"]=D.exports;k()(D,"components",{QTable:I["a"],QBtn:q["a"],QTd:M["a"],QIcon:O["a"],QTooltip:Q["a"]})}}]);